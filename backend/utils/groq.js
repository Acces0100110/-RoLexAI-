// utils/groq.js
// Asistent juridic RoLexAI - BazÄƒ extinsÄƒ de cunoÈ™tinÈ›e pentru legislaÈ›ia romÃ¢nÄƒ

// BazÄƒ de cunoÈ™tinÈ›e COMPLETÄ‚ despre legislaÈ›ia romÃ¢nÄƒ
const knowledgeBase = {
  // SalutÄƒri È™i introducere
  salut: {
    keywords: ['salut', 'buna', 'bunÄƒ', 'hey', 'hello', 'hi', 'servus', 'ce faci'],
    response: 'ğŸ‘‹ **BunÄƒ! Sunt RoLexAI** - asistentul tÄƒu juridic virtual pentru **legislaÈ›ia romÃ¢neascÄƒ**! ğŸ‡·ğŸ‡´âš–ï¸\n\n**ğŸ“š Pot sÄƒ te ajut cu:**\n\nğŸ”¹ **OUG-uri** (OrdonanÈ›e de UrgenÈ›Äƒ)\nğŸ”¹ **Codul Penal** (infracÈ›iuni, pedepse)\nğŸ”¹ **Codul Civil** (contracte, proprietate, moÈ™teniri)\nğŸ”¹ **Codul Muncii** (drepturi angajaÈ›i, concedieri)\nğŸ”¹ **ConstituÈ›ia RomÃ¢niei**\nğŸ”¹ **GDPR & protecÈ›ia datelor**\nğŸ”¹ **ProcedurÄƒ civilÄƒ È™i penalÄƒ**\n\nğŸ’¬ **Exemple de Ã®ntrebÄƒri:**\nâ€¢ "Ce este o OUG?"\nâ€¢ "Care este pedeapsa pentru furt?"\nâ€¢ "CÃ¢te zile de concediu am dreptul?"\nâ€¢ "Ce Ã®nseamnÄƒ prescripÈ›ia Ã®n Codul Civil?"\n\n**Cum te pot ajuta?** ğŸ˜Š'
  },

  // OUG-uri
  oug: {
    keywords: ['oug', 'ordonanÈ›', 'ordonanta', 'urgenÈ›Äƒ', 'urgenta', 'guvern emite'],
    response: 'ğŸ“œ **OUG (OrdonanÈ›Äƒ de UrgenÈ›Äƒ a Guvernului)**\n\nEste un **act normativ** adoptat de Guvernul RomÃ¢niei Ã®n **situaÈ›ii extraordinare** care nu pot aÈ™tepta procedura legislativÄƒ normalÄƒ.\n\n**ğŸ“‹ Baza legalÄƒ:** Art. 115 din ConstituÈ›ia RomÃ¢niei\n\n**âœ… Caracteristici:**\nâ€¢ IntrÄƒ Ã®n vigoare **IMEDIAT** dupÄƒ publicare Ã®n Monitorul Oficial\nâ€¢ Trebuie aprobatÄƒ de **Parlament** Ã®n max. 30 zile\nâ€¢ Poate fi **modificatÄƒ** sau **respinsÄƒ** de Parlament\nâ€¢ DacÄƒ e respinsÄƒ, Ã®nceteazÄƒ efectele (dar faptele Ã®n baza ei rÄƒmÃ¢n valabile)\n\n**âŒ NU poate reglementa:**\nâ€¢ Legi constituÈ›ionale\nâ€¢ Drepturi electorale\nâ€¢ Bugetul de stat\nâ€¢ GraÈ›ieri sau amnistii\n\n**ğŸ“Š Exemple celebre:**\nâ€¢ **OUG 114/2018** - taxa pe active bancare (controversatÄƒ)\nâ€¢ **OUG 195/2002** - circulaÈ›ia rutierÄƒ (Ã®ncÄƒ Ã®n vigoare)\nâ€¢ **OUG 57/2019** - Codul administrativ\nâ€¢ **OUG 158/2005** - concedii medicale\n\nğŸ” **Toate OUG-urile:** legislatie.just.ro â†’ CautÄƒ "OUG"'
  },

  // Cod Penal
  cod_penal: {
    keywords: ['penal', 'infracÈ›iuni', 'infractiuni', 'pedeps', 'furt', 'omor', 'viol', 'tÃ¢lhÄƒrie', 'talharie', 'conduce', 'alcool', 'drogue', 'hot', 'crimÄƒ'],
    response: 'âš–ï¸ **Codul Penal al RomÃ¢niei**\n**Legea nr. 286/2009** (Ã®n vigoare din 1 februarie 2014)\n\nReglementeazÄƒ **infracÈ›iunile** È™i **pedepsele** Ã®n RomÃ¢nia.\n\n**ğŸ“š StructurÄƒ:**\nğŸ”¹ **Partea GeneralÄƒ:** principii penale, rÄƒspundere, circumstanÈ›e atenuante/agravante, participaÈ›ie\nğŸ”¹ **Partea SpecialÄƒ:** infracÈ›iuni concrete cu pedepse\n\n**ğŸ”´ InfracÈ›iuni frecvente:**\n\n**1ï¸âƒ£ Contra patrimoniului:**\nâ€¢ **Art. 228-229: FURT** â†’ 6 luni - 20 ani Ã®nchisoare\n  - Furt simplu: 6 luni - 3 ani\n  - Furt calificat (cu efracÈ›ie, noapte): 1-12 ani\nâ€¢ **Art. 233-236: TÃ‚LHÄ‚RIE** â†’ 3-15 ani\nâ€¢ **Art. 244: ÃNÈ˜ELÄ‚CIUNE (FRAUDÄ‚)** â†’ 6 luni - 12 ani\n\n**2ï¸âƒ£ Contra vieÈ›ii:**\nâ€¢ **Art. 188-189: OMOR** â†’ 10-25 ani SAU detenÈ›ie pe viaÈ›Äƒ\n  - Omor simplu: 10-20 ani\n  - Omor calificat: 15-25 ani / detenÈ›ie pe viaÈ›Äƒ\nâ€¢ **Art. 178-179: OMOR CALIFICAT** â†’ detenÈ›ie pe viaÈ›Äƒ\n\n**3ï¸âƒ£ Contra integritÄƒÈ›ii corporale:**\nâ€¢ **Art. 193-194: LOVIRE/VÄ‚TÄ‚MARE** â†’ 3 luni - 7 ani\n\n**4ï¸âƒ£ Contra libertÄƒÈ›ii sexuale:**\nâ€¢ **Art. 218: VIOL** â†’ 5-18 ani\nâ€¢ **Art. 219: AGRESIUNE SEXUALÄ‚** â†’ 3-14 ani\n\n**5ï¸âƒ£ Contra siguranÈ›ei circulaÈ›iei:**\nâ€¢ **Art. 335: CONDUCERE SUB INFLUENÈšA ALCOOLULUI**\n  - Peste 0,80 g/l alcool Ã®n sÃ¢nge â†’ 1-5 ani Ã®nchisoare\n  - Sub 0,80 g/l â†’ contravenÈ›ie + suspendare permis\n\n**â° PRESCRIPÈšIA (cÃ¢nd se stinge rÄƒspunderea penalÄƒ):**\nâ€¢ DetenÈ›ie pe viaÈ›Äƒ: **30 ani**\nâ€¢ Peste 20 ani Ã®nchisoare: **20 ani**\nâ€¢ 10-20 ani: **15 ani**\nâ€¢ Sub 10 ani: **10 ani**\nâ€¢ Sub 5 ani: **8 ani**\n\nğŸ“– **Text complet:** legislatie.just.ro/Public/DetaliiDocument/109855'
  },

  // Cod Civil
  cod_civil: {
    keywords: ['civil', 'contract', 'proprietate', 'vÃ¢nzare', 'vanzare', 'cumpÄƒrare', 'cumparare', 'Ã®nchiriere', 'inchiriere', 'mostenire', 'moÈ™tenire', 'divort', 'divorÈ›', 'cÄƒsÄƒtorie', 'casatorie'],
    response: 'ğŸ“˜ **Codul Civil al RomÃ¢niei**\n**Legea nr. 287/2009** (Ã®n vigoare din 1 octombrie 2011)\n\nReglementeazÄƒ **raporturile juridice civile** dintre persoane.\n\n**ğŸ›ï¸ Domenii principale:**\n\n**1ï¸âƒ£ PERSOANE:**\nâ€¢ Persoane fizice: naÈ™tere, majorat (18 ani), capacitate juridicÄƒ\nâ€¢ Persoane juridice: societÄƒÈ›i, asociaÈ›ii, fundaÈ›ii\nâ€¢ Domiciliul È™i reÈ™edinÈ›a\n\n**2ï¸âƒ£ FAMILIA:**\nâ€¢ **CÄƒsÄƒtoria:** condiÈ›ii, efecte, regim matrimonial\nâ€¢ **DivorÈ›ul:** prin acordul pÄƒrÈ›ilor SAU prin hotÄƒrÃ¢re judecÄƒtoreascÄƒ\nâ€¢ **Autoritate pÄƒrinteascÄƒ:** responsabilitÄƒÈ›i pÄƒrinÈ›i\nâ€¢ **ObligaÈ›ia de Ã®ntreÈ›inere** Ã®ntre rude\n\n**3ï¸âƒ£ SUCCESIUNI (MOÈ˜TENIRI):**\nâ€¢ **MoÈ™tenire legalÄƒ:** ordinea moÈ™tenitorilor\n  - Ordinul 1: Copii + soÈ›/soÈ›ie\n  - Ordinul 2: PÄƒrinÈ›i + fraÈ›i\n  - Ordinul 3: Bunici\n  - Ordinul 4: StrÄƒbunici È™i rude colaterale\nâ€¢ **MoÈ™tenire testamentarÄƒ:** prin testament\nâ€¢ **Rezerva succesoralÄƒ:** cota garantatÄƒ copiilor (1/2 din parte)\n\n**4ï¸âƒ£ BUNURI & PROPRIETATE:**\nâ€¢ **Dreptul de proprietate:** ABSOLUT, EXCLUSIV, PERPETUU\nâ€¢ **Uzucapiune (dobÃ¢ndire prin posesie):**\n  - Posesie de bunÄƒ-credinÈ›Äƒ: 10 ani\n  - Posesie de rea-credinÈ›Äƒ: 30 ani\nâ€¢ **ServituÈ›i:** drepturi asupra proprietÄƒÈ›ii altuia\n\n**5ï¸âƒ£ OBLIGAÈšII & CONTRACTE:**\n\n**ğŸ“‹ Contracte importante:**\nâ€¢ **VÃ‚NZARE-CUMPÄ‚RARE** (art. 1650-1766)\n  - Contract consensual (se formeazÄƒ prin acord)\n  - Pentru imobile: OBLIGATORIU act autentic (notar)\nâ€¢ **LOCAÈšIUNE (ÃNCHIRIERE)** (art. 1777-1850)\n  - Contract prin care proprietarul dÄƒ Ã®n folosinÈ›Äƒ un bun\nâ€¢ **DONAÈšIE** (art. 985-1026)\n  - Transfer gratuit de bunuri\n  - Pentru imobile: act autentic\nâ€¢ **ÃMPRUMUT** (art. 2146-2176)\n  - De consumaÈ›ie (bani) sau de folosinÈ›Äƒ (bunuri)\n\n**â° PRESCRIPÈšIA (termenul Ã®n care poÈ›i face reclamaÈ›ii):**\nâ€¢ **PrescripÈ›ie generalÄƒ:** **3 ANI** (art. 2517)\n  - Se aplicÄƒ la majoritatea obligaÈ›iilor\nâ€¢ **PrescripÈ›ie specialÄƒ:**\n  - Daune din contracte: 3 ani\n  - Daune din delicte: 3 ani de la cunoaÈ™tere\n  - Dreptul de proprietate: IMPRESCRIPTIBIL (nu se pierde)\n\n**ğŸ’° DOBÃ‚NDA LEGALÄ‚:**\nâ€¢ DobÃ¢nda legalÄƒ pentru Ã®ntÃ¢rzieri: stabilitÄƒ prin OG\nâ€¢ DobÃ¢nda contractualÄƒ: stabilitÄƒ de pÄƒrÈ›i (Ã®n limite legale)\n\nğŸ“– **Text integral:** legislatie.just.ro/Public/DetaliiDocument/109975'
  },

  // Cod Muncii
  cod_muncii: {
    keywords: ['munca', 'munci', 'angajat', 'angajator', 'concedier', 'concediu', 'salariu', 'contract de munca', 'demisie', 'preaviz', 'ore suplimentare'],
    response: 'ğŸ‘” **Codul Muncii**\n**Legea nr. 53/2003** (actualizat periodic)\n\nReglementeazÄƒ **raporturile de muncÄƒ** dintre angajaÈ›i È™i angajatori.\n\n**ğŸ“‹ DREPTURILE ANGAJATULUI:**\n\n**1ï¸âƒ£ CONCEDIU DE ODIHNÄ‚:**\nâ€¢ **Minimum: 20 zile lucrÄƒtoare/an** (nu se pot reduce!)\nâ€¢ Poate fi mai mare prin contract/CCM\nâ€¢ Se acordÄƒ proporÈ›ional cu timpul lucrat\nâ€¢ Se plÄƒteÈ™te cu **minim 5 zile Ã®nainte** de plecare Ã®n concediu\n\n**2ï¸âƒ£ CONCEDIU MEDICAL:**\nâ€¢ PlÄƒtit **75%** din salariul mediu brut (primele 5 zile de angajator, restul de CASS)\nâ€¢ **100%** pentru: boli profesionale, accidente de muncÄƒ, TBC, HIV, tumori\nâ€¢ Se acordÄƒ pe bazÄƒ de certificat medical (emis de medic)\n\n**3ï¸âƒ£ SALARIUL:**\nâ€¢ **Salariul minim brut:** actualizat anual prin HG (verificÄƒ pe gov.ro)\n  - 2025: **3.700 lei brut/lunÄƒ** (Ã®n construcÈ›ii: 4.000 lei)\nâ€¢ Se plÄƒteÈ™te **lunar**, pÃ¢nÄƒ la data stabilitÄƒ Ã®n contract\nâ€¢ **Salariul net** = brut - impozit (10%) - CAS (25%) - CASS (10%)\n\n**4ï¸âƒ£ PROGRAM DE LUCRU:**\nâ€¢ **NormÄƒ completÄƒ:** max. **8 ore/zi**, **40 ore/sÄƒptÄƒmÃ¢nÄƒ**\nâ€¢ **Ore suplimentare:**\n  - Spor: +75% (zi), +100% (noapte/weekend/sÄƒrbÄƒtori)\n  - Max. 48 ore/sÄƒptÄƒmÃ¢nÄƒ (inclusiv ore suplimentare)\n  - Max. 360 ore suplimentare/an\n\n**â±ï¸ PERIOADA DE PROBÄ‚:**\nâ€¢ **FuncÈ›ii de execuÈ›ie:** max. **90 zile**\nâ€¢ **FuncÈ›ii de conducere:** max. **120 zile**\nâ€¢ **Persoane cu dizabilitÄƒÈ›i:** max. **30 zile**\nâ€¢ **DebutanÈ›i:** max. **30 zile**\nâ€¢ Ãn perioada de probÄƒ: **nu e nevoie de preaviz** pentru demisie/concediere\n\n**ğŸšª ÃNCETAREA CONTRACTULUI DE MUNCÄ‚:**\n\n**A) DEMISIA (angajatul renunÈ›Äƒ):**\nâ€¢ **Preaviz: 20 zile lucrÄƒtoare**\nâ€¢ Se face **Ã®n scris**\nâ€¢ Angajatul poate renunÈ›a la preaviz (dar pierde dreptul la compensaÈ›ii)\n\n**B) CONCEDIERE (angajatorul Ã®nceteazÄƒ contractul):**\n\n**1. Concediere cu preaviz (din motive obiective):**\nâ€¢ **Preaviz: 20 zile lucrÄƒtoare**\nâ€¢ Motive: reorganizare, reducere personal, inaptitudine\nâ€¢ **CompensaÈ›ii:**\n  - Minimum **6 salarii** de bazÄƒ (pentru vechime peste 20 ani: 12 salarii)\n  - Se calculeazÄƒ pentru fiecare an lucrat\n\n**2. Concediere disciplinarÄƒ (FÄ‚RÄ‚ preaviz):**\nâ€¢ Pentru **abateri grave:**\n  - Absenteism (3 absenÈ›e nemotivate Ã®n 30 zile)\n  - Furt, fraudÄƒ\n  - Nerespectarea regulamentului intern\n  - Stare de ebrietate la serviciu\nâ€¢ **NU se acordÄƒ compensaÈ›ii**\nâ€¢ Trebuie **cercetare prealabilÄƒ** (angajatul poate da explicaÈ›ii)\n\n**3. Concediere colectivÄƒ:**\nâ€¢ CÃ¢nd se concediazÄƒ **minimum 10 angajaÈ›i**\nâ€¢ Angajatorul trebuie sÄƒ notifice **AJOFM** È™i **sindicatul**\nâ€¢ **Criterii de selecÈ›ie:** performanÈ›Äƒ, sarcini de familie, vechime\n\n**âš ï¸ CONCEDIERE ABUZIVÄ‚:**\n\nDacÄƒ consideri cÄƒ ai fost **concediat ilegal**, poÈ›i:**\n\nâœ… **Contesta Ã®n instanÈ›Äƒ** Ã®n termen de **30 zile** de la comunicare\nâœ… **Solicita:**\n  - **Reintegrare** pe post SAU\n  - **DespÄƒgubiri:** minimum **6 luni salariu** (uneori mai mult)\nâœ… **Suspendare executare:** poÈ›i cere instanÈ›ei sÄƒ suspende concedierea pÃ¢nÄƒ la soluÈ›ionare\n\n**ğŸ¥ ALTE DREPTURI:**\nâ€¢ **Concediu de maternitate:** 126 zile (plÄƒtit de CASS)\nâ€¢ **Concediu creÈ™tere copil:** pÃ¢nÄƒ la 2 ani (3 ani pentru copil cu dizabilitÄƒÈ›i)\nâ€¢ **Zile libere plÄƒtite:**\n  - CÄƒsÄƒtorie: 5 zile\n  - Deces rudÄƒ apropiatÄƒ: 3 zile\n  - Donare de sÃ¢nge: 1 zi\n\nğŸ“– **Surse:**\nâ€¢ legislatie.just.ro\nâ€¢ mmuncii.ro (Ministerul Muncii)\nâ€¢ inspectiamuncii.ro (ITM - pentru reclamaÈ›ii)'
  },

  // ConstituÈ›ia RomÃ¢niei
  constitutie: {
    keywords: ['constituÈ›ie', 'constitutie', 'constituÈ›ional', 'constitutional', 'ccr', 'curtea constituÈ›ional', 'fundamental'],
    response: 'ğŸ‡·ğŸ‡´ **ConstituÈ›ia RomÃ¢niei**\n**AdoptatÄƒ:** 8 decembrie 1991 (referendum)\n**RevizuitÄƒ:** 18-19 octombrie 2003 (referendum)\n\n**ğŸ“œ Este LEGEA FUNDAMENTALÄ‚ a statului romÃ¢n** - toate celelalte legi trebuie sÄƒ fie conforme cu ea.\n\n**âš–ï¸ PRINCIPII FUNDAMENTALE:**\n\n**Art. 1:** RomÃ¢nia este **stat naÈ›ional, suveran È™i independent, unitar È™i indivizibil**\nâ€¢ FormÄƒ de guvernÄƒmÃ¢nt: **REPUBLICÄ‚**\nâ€¢ Stat de drept, democratic È™i social\n\n**Art. 16:** **Egalitate Ã®n drepturi** - toÈ›i cetÄƒÈ›enii sunt egali Ã®n faÈ›a legii\n\n**Art. 21:** **Acces liber la justiÈ›ie** - orice persoanÄƒ se poate adresa justiÈ›iei\n\n**Art. 44:** **Dreptul de proprietate privatÄƒ** este garantat È™i protejat\n\n**ğŸ›ï¸ SEPARAÈšIA PUTERILOR (Art. 1):**\n\n**1ï¸âƒ£ PUTEREA LEGISLATIVÄ‚** (face legile):\nâ€¢ **Parlamentul** (Camera DeputaÈ›ilor + Senatul)\nâ€¢ AleÈ™i prin vot universal pentru **4 ani**\n\n**2ï¸âƒ£ PUTEREA EXECUTIVÄ‚** (aplicÄƒ legile):\nâ€¢ **PreÈ™edintele RomÃ¢niei** (ales pentru 5 ani, max. 2 mandate)\nâ€¢ **Guvernul** (Prim-ministru + miniÈ™tri)\n\n**3ï¸âƒ£ PUTEREA JUDECÄ‚TOREASCÄ‚** (aplicÄƒ justiÈ›ia):\nâ€¢ **InstanÈ›ele judecÄƒtoreÈ™ti** (independente)\nâ€¢ **Ministerul Public** (procurori)\nâ€¢ **Curtea ConstituÈ›ionalÄƒ** (verificÄƒ constituÈ›ionalitatea legilor)\n\n**ğŸ›¡ï¸ DREPTURI È˜I LIBERTÄ‚ÈšI FUNDAMENTALE:**\n\n**Art. 22:** Dreptul la viaÈ›Äƒ È™i integritate fizicÄƒ\n**Art. 23:** Libertatea individualÄƒ (nimeni nu poate fi arestat fÄƒrÄƒ mandat)\n**Art. 26:** ViaÈ›a intimÄƒ, familialÄƒ È™i privatÄƒ\n**Art. 29:** Libertatea de conÈ™tiinÈ›Äƒ (religie)\n**Art. 30:** Libertatea de exprimare\n**Art. 40:** Dreptul de asociere\n**Art. 41:** Dreptul la muncÄƒ È™i protecÈ›ia muncii\n**Art. 53:** **RestrÃ¢ngerea exerciÈ›iului unor drepturi** - posibilÄƒ doar prin lege, pentru:\n  - Securitate naÈ›ionalÄƒ\n  - Ordine publicÄƒ\n  - SÄƒnÄƒtate sau moralitate publicÄƒ\n  - Drepturile victimelor\n\n**ğŸ“‹ ACTE NORMATIVE (Art. 115):**\n\nâ€¢ **Legi** - adoptate de Parlament\nâ€¢ **OUG (OrdonanÈ›e de UrgenÈ›Äƒ)** - emise de Guvern Ã®n situaÈ›ii extraordinare\nâ€¢ **OG (OrdonanÈ›e simple)** - Ã®n baza unei legi de abilitare\nâ€¢ **HotÄƒrÃ¢ri de Guvern (HG)**\n\n**ğŸ›ï¸ CURTEA CONSTITUÈšIONALÄ‚ (CCR):**\n\n**Rol:** VerificÄƒ dacÄƒ legile sunt **conforme cu ConstituÈ›ia**\n**ComponenÈ›Äƒ:** 9 judecÄƒtori (mandate de 9 ani, nerenovabile)\n**AtribuÈ›ii:**\nâ€¢ ControleazÄƒ constituÈ›ionalitatea legilor\nâ€¢ SoluÈ›ioneazÄƒ conflicte juridice Ã®ntre autoritÄƒÈ›i\nâ€¢ ValideazÄƒ referendumurile\nâ€¢ VerificÄƒ condiÈ›iile de alegere a PreÈ™edintelui\n\n**Deciziile CCR sunt OBLIGATORII** È™i se aplicÄƒ tuturor!\n\n**â™»ï¸ REVIZUIREA CONSTITUÈšIEI (Art. 150):**\n\nConstituÈ›ia poate fi **modificatÄƒ** prin:\n1. **IniÈ›iativa:** PreÈ™edinte, 1/4 din parlamentari, min. 500.000 cetÄƒÈ›eni\n2. **Adoptare:** 2/3 din parlamentari (sau 3/4 pentru titlurile I-III)\n3. **Referendum:** aprobat de majoritate Ã®n referendum\n\n**âŒ NU pot fi revizuite:**\nâ€¢ Caracterul naÈ›ional, independent, unitar È™i indivizibil al statului\nâ€¢ Forma de guvernÄƒmÃ¢nt (republicÄƒ)\nâ€¢ Integritatea teritoriului\nâ€¢ IndependenÈ›a justiÈ›iei\nâ€¢ Drepturile È™i libertÄƒÈ›ile fundamentale\n\nğŸ“– **CiteÈ™te ConstituÈ›ia:** cdep.ro/pls/dic/site.page?id=339'
  },

  // GDPR È™i protecÈ›ia datelor
  gdpr: {
    keywords: ['gdpr', 'date personale', 'protecÈ›ie date', 'protectie date', 'anspdcp', 'rgpd', 'privacy', 'confidenÈ›ial'],
    response: 'ğŸ”’ **GDPR & ProtecÈ›ia Datelor Personale**\n\n**ğŸ“œ LegislaÈ›ie:**\nâ€¢ **Regulamentul UE 2016/679 (GDPR)** - aplicabil direct Ã®n RomÃ¢nia\nâ€¢ **Legea 190/2018** - implementarea GDPR Ã®n RomÃ¢nia\n\n**â“ Ce sunt datele personale?**\nOrice informaÈ›ie despre o persoanÄƒ identificabilÄƒ:\nâ€¢ Nume, prenume, CNP\nâ€¢ AdresÄƒ, telefon, email\nâ€¢ IP, cookies, localizare GPS\nâ€¢ Imagini, Ã®nregistrÄƒri video/audio\nâ€¢ Date biometrice (amprentÄƒ, recunoaÈ™tere facialÄƒ)\n\n**âœ… DREPTURILE TALE:**\n\n**1. Dreptul de ACCES:**\nâ€¢ PoÈ›i cere ce date are o companie despre tine\nâ€¢ RÄƒspuns obligatoriu Ã®n **30 zile**\n\n**2. Dreptul de RECTIFICARE:**\nâ€¢ PoÈ›i cere corectarea datelor greÈ™ite\n\n**3. Dreptul la È˜TERGERE ("Dreptul de a fi uitat"):**\nâ€¢ PoÈ›i cere È™tergerea datelor tale dacÄƒ:\n  - Nu mai sunt necesare\n  - ÃÈ›i retragi consimÈ›ÄƒmÃ¢ntul\n  - Datele au fost prelucrate ilegal\n\n**4. Dreptul la PORTABILITATE:**\nâ€¢ PoÈ›i cere datele Ã®n format electronic (pentru a le muta la alt serviciu)\n\n**5. Dreptul de OPOZIÈšIE:**\nâ€¢ Te poÈ›i opune prelucrÄƒrii pentru marketing direct\n\n**6. Dreptul la RESTRICÈšIONARE:**\nâ€¢ PoÈ›i cere "Ã®ngheÈ›area" datelor (nu È™tergere, dar nu prelucrare)\n\n**âš ï¸ OBLIGAÈšIILE COMPANIILOR:**\n\nâ€¢ **ConsimÈ›ÄƒmÃ¢nt explicit** pentru prelucrarea datelor\nâ€¢ **Securitate** - mÄƒsuri tehnice È™i organizatorice\nâ€¢ **Notificare breach:** Ã®n 72 ore dacÄƒ sunt furate date\nâ€¢ **DPO (Data Protection Officer):** obligatoriu pentru instituÈ›ii publice È™i companii mari\n\n**ğŸ’° SANCÈšIUNI (AMENZI URIAÈ˜E!):**\n\nâ€¢ PÃ¢nÄƒ la **20 milioane EUR** SAU\nâ€¢ **4% din cifra de afaceri anualÄƒ globalÄƒ** (se aplicÄƒ suma mai mare)\n\n**Exemple de amenzi GDPR:**\nâ€¢ Amazon: 746 milioane EUR\nâ€¢ Google: 90 milioane EUR\nâ€¢ Facebook: 265 milioane EUR\n\n**ğŸ›ï¸ AUTORITATEA DE SUPRAVEGHERE:**\n\n**ANSPDCP** (Autoritatea NaÈ›ionalÄƒ de Supraveghere a PrelucrÄƒrii Datelor cu Caracter Personal)\n\nğŸ“ **Contact:**\nâ€¢ Website: **dataprotection.ro**\nâ€¢ Email: anspdcp@dataprotection.ro\nâ€¢ Telefon: 031.805.9211\nâ€¢ AdresÄƒ: B-dul G-ral. Gheorghe Magheru 28-30, BucureÈ™ti\n\n**ğŸ“ CUM DEPUI PLÃ‚NGERE:**\n\n1. **Online:** pe dataprotection.ro (formular)\n2. **Email/poÈ™tÄƒ:** descrie Ã®ncÄƒlcarea\n3. **Personal:** la sediul ANSPDCP\n\n**Termen:** Ãn termen de **1 an** de la Ã®ncÄƒlcare\n\n**ğŸ’¡ SFATURI:**\nâ€¢ CiteÈ™te **politica de confidenÈ›ialitate** Ã®nainte sÄƒ dai datele\nâ€¢ **Nu accepta** automat cookies - configureazÄƒ-le\nâ€¢ VerificÄƒ ce **permisiuni** ceri aplicaÈ›iile mobile\nâ€¢ FoloseÈ™te **email-uri temporare** pentru Ã®nregistrÄƒri\n\nğŸ“– **Mai multe:** dataprotection.ro | eugdpr.org'
  },

  // ProcedurÄƒ civilÄƒ È™i penalÄƒ
  procedura: {
    keywords: ['procedur', 'proces', 'tribunal', 'instanÈ›Äƒ', 'instanta', 'judecÄƒtor', 'judecator', 'avocat', 'judecatÄƒ'],
    response: 'âš–ï¸ **Codurile de ProcedurÄƒ**\n\n**ğŸ“˜ CODUL DE PROCEDURÄ‚ CIVILÄ‚ (CPC)**\nLegea 134/2010 - reglementeazÄƒ **procesele civile**\n\n**Tipuri de procese civile:**\nâ€¢ DivorÈ›uri\nâ€¢ Litigii contractuale (vÃ¢nzare, Ã®nchiriere)\nâ€¢ MoÈ™teniri\nâ€¢ Daune materiale/morale\nâ€¢ Litigii de muncÄƒ\n\n**â° Termene importante:**\nâ€¢ **Apel:** **30 zile** de la comunicarea hotÄƒrÃ¢rii\nâ€¢ **Recurs:** **30 zile** de la comunicarea hotÄƒrÃ¢rii de apel\nâ€¢ **ContestaÈ›ie Ã®n anulare:** **15 zile**\n\n**ğŸ’° Taxe judiciare:**\nâ€¢ VariazÄƒ Ã®n funcÈ›ie de valoarea obiectului (ex: 3% din sumÄƒ pentru litigii < 500.000 lei)\nâ€¢ DivorÈ› prin acordul pÄƒrÈ›ilor: ~200 lei\nâ€¢ DivorÈ› contencio: depinde de pretenÈ›iile accesorii\n\n**ğŸ“œ CODUL DE PROCEDURÄ‚ PENALÄ‚ (CPP)**\nLegea 135/2010 - reglementeazÄƒ **procesele penale**\n\n**Faze:**\n1. **UrmÄƒrire penalÄƒ** (fÄƒcutÄƒ de PoliÈ›ie/Parchet)\n2. **Trimitere Ã®n judecatÄƒ** (de cÄƒtre Procuror)\n3. **JudecatÄƒ** (la instanÈ›Äƒ)\n4. **Executare** (pedeapsa)\n\n**â° Termene:**\nâ€¢ **Apel:** **10 zile** de la pronunÈ›are\nâ€¢ **Recurs:** **10 zile** de la pronunÈ›are\nâ€¢ **ReÈ›inere:** max. **24 ore** (fÄƒrÄƒ mandat)\nâ€¢ **Arest preventiv:** max. **30 zile** (poate fi prelungit)\n\n**ğŸ›ï¸ INSTANÈšELE DIN ROMÃ‚NIA:**\n\n**1ï¸âƒ£ JUDECÄ‚TORII** (prim nivel):\nâ€¢ Procese civile simple (< 200.000 lei)\nâ€¢ ContravenÈ›ii\nâ€¢ DivorÈ›uri\n\n**2ï¸âƒ£ TRIBUNALE:**\nâ€¢ Apel faÈ›Äƒ de judecÄƒtorii\nâ€¢ Procese civile mari (> 200.000 lei)\nâ€¢ Procese penale grave (peste 7 ani Ã®nchisoare)\n\n**3ï¸âƒ£ CURÈšI DE APEL:**\nâ€¢ Apel faÈ›Äƒ de tribunale\nâ€¢ Recurs faÈ›Äƒ de judecÄƒtorii\n\n**4ï¸âƒ£ ÃNALTA CURTE DE CASAÈšIE È˜I JUSTIÈšIE (ICCJ):**\nâ€¢ UltimÄƒ instanÈ›Äƒ\nâ€¢ Recurs Ã®n casaÈ›ie\nâ€¢ Dezlegarea de chestiuni de drept\n\n**ğŸ‘¨â€âš–ï¸ AI NEVOIE DE AVOCAT?**\n\n**Obligatoriu:**\nâ€¢ Procese penale (infracÈ›iuni cu Ã®nchisoare > 7 ani)\nâ€¢ Minori\nâ€¢ Persoane cu dizabilitÄƒÈ›i\nâ€¢ Recurs/apel Ã®n unele cazuri\n\n**Recomandat:**\nâ€¢ Litigii complexe (moÈ™teniri, proprietate)\nâ€¢ Sume mari Ã®n joc\nâ€¢ DivorÈ›uri conflictuale\n\n**AsistenÈ›Äƒ juridicÄƒ gratuitÄƒ:**\nâ€¢ Pentru persoane cu venituri mici\nâ€¢ Cerere la Baroul de AvocaÈ›i\n\nğŸ“– **Surse:**\nâ€¢ portal.just.ro (Portalul instanÈ›elor)\nâ€¢ just.ro (Ministerul JustiÈ›iei)'
  },

  // Ajutor general
  ajutor: {
    keywords: ['ajutor', 'help', 'ce poÈ›i', 'ce poti', 'cum funcÈ›ionez', 'cum functionez'],
    response: 'ğŸ’¡ **Cum funcÈ›ioneazÄƒ RoLexAI?**\n\nSunt un **asistent juridic virtual** specializat Ã®n **legislaÈ›ia romÃ¢neascÄƒ**.\n\n**ğŸ“š Domenii Ã®n care te pot ajuta:**\n\nâœ… **OUG-uri** (OrdonanÈ›e de UrgenÈ›Äƒ)\nâœ… **Codul Penal** (infracÈ›iuni, pedepse, prescripÈ›ie)\nâœ… **Codul Civil** (contracte, proprietate, moÈ™teniri, divorÈ›uri)\nâœ… **Codul Muncii** (drepturi angajaÈ›i, concedii, concedieri)\nâœ… **ConstituÈ›ia RomÃ¢niei** (drepturi fundamentale, structura statului)\nâœ… **GDPR** (protecÈ›ia datelor personale)\nâœ… **ProcedurÄƒ civilÄƒ È™i penalÄƒ** (cum funcÈ›ioneazÄƒ procesele)\n\n**ğŸ’¬ Exemple de Ã®ntrebÄƒri:**\nâ€¢ "Ce este o OUG?"\nâ€¢ "Care este pedeapsa pentru furt?"\nâ€¢ "CÃ¢te zile de concediu am dreptul?"\nâ€¢ "Ce Ã®nseamnÄƒ prescripÈ›ia Ã®n dreptul civil?"\nâ€¢ "Cum pot contesta o concediere?"\nâ€¢ "Ce drepturi am conform GDPR?"\n\n**âš ï¸ IMPORTANT:**\nRÄƒspunsurile mele sunt **informative**. Pentru cazuri concrete È™i consiliere juridicÄƒ personalizatÄƒ, **consultÄƒ un avocat**.\n\nğŸ“– **Surse oficiale:**\nâ€¢ legislatie.just.ro\nâ€¢ lege5.ro\nâ€¢ monitoruloficial.ro'
  }
};

async function chatWithGroq(messages) {
  try {
    const userMsg = messages[messages.length - 1]?.content || '';
    const msgLower = userMsg.toLowerCase().normalize('NFD').replace(/[\u0300-\u036f]/g, ''); // NormalizeazÄƒ diacritice
    
    console.log('ğŸ¤– Ãntrebare utilizator:', userMsg.substring(0, 80));
    
    // CautÄƒ Ã®n baza de cunoÈ™tinÈ›e
    for (const [key, data] of Object.entries(knowledgeBase)) {
      const found = data.keywords.some(keyword => {
        const normalizedKeyword = keyword.toLowerCase().normalize('NFD').replace(/[\u0300-\u036f]/g, '');
        return msgLower.includes(normalizedKeyword);
      });
      
      if (found) {
        console.log('âœ… RÄƒspuns gÄƒsit Ã®n secÈ›iunea:', key);
        return data.response;
      }
    }
    
    // DacÄƒ nu gÄƒseÈ™te nimic specific, returneazÄƒ ajutor general
    console.log('â„¹ï¸ Nu am gÄƒsit rÄƒspuns specific, returnez ajutor general');
    return `ğŸ“š **Nu am gÄƒsit informaÈ›ii specifice despre "${userMsg}"**\n\nDar Ã®È›i pot rÄƒspunde la Ã®ntrebÄƒri despre:\n\nğŸ”¹ **OUG-uri** - "Ce este o OUG?"\nğŸ”¹ **Codul Penal** - "Care e pedeapsa pentru furt?"\nğŸ”¹ **Codul Civil** - "Ce Ã®nseamnÄƒ uzucapiunea?"\nğŸ”¹ **Codul Muncii** - "CÃ¢te zile de concediu am?"\nğŸ”¹ **ConstituÈ›ia** - "Ce drepturi am conform ConstituÈ›iei?"\nğŸ”¹ **GDPR** - "Ce drepturi am privind datele personale?"\nğŸ”¹ **ProcedurÄƒ** - "Cum depun o plÃ¢ngere la tribunal?"\n\nğŸ’¡ **ReformuleazÄƒ Ã®ntrebarea** sau alege un subiect de mai sus!\n\nğŸ“– **Pentru legislaÈ›ie completÄƒ:** legislatie.just.ro`;

  } catch (error) {
    console.error('âŒ Eroare:', error.message);
    return 'âš ï¸ A apÄƒrut o eroare tehnicÄƒ. Te rog sÄƒ Ã®ncerci din nou sau reformuleazÄƒ Ã®ntrebarea.';
  }
}

module.exports = { chatWithGroq };
